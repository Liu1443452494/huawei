"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Panels=exports.Carousel=void 0;var _createClass=function(){function s(t,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,o,l){return o&&s(t.prototype,o),l&&s(t,l),t}}(),_tools=require("./tools.js");function _classCallCheck(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}var Carousel=function(){function t(){_classCallCheck(this,t),this.url="http://10.31.161.144/huawei/php/",this.carousel_banner=(0,_tools.$)(".carousel_banner"),this.list_div=(0,_tools.$)(".list_div .slide_list"),this.leftbtn=(0,_tools.$)(".button_left"),this.rightbtn=(0,_tools.$)(".button_right"),this.timer=null,this.carousel=(0,_tools.$)("#carousel"),this.topcontnet=(0,_tools.$)(".topContent_2"),this.login_url=(0,_tools.$)(".login_url")}return _createClass(t,[{key:"init",value:function(){if(_tools.jstool.getcookie("login")){var t=_tools.jstool.getcookie("username1"),o=t.substr(0,4),l=t.substr(7.4);console.log(l),this.login_url.innerHTML='\n                您好！ &nbsp;<a href="login.html">'+o+' </a>\n                                <span>****</span><a href="register.html">'+l+"</a>"}else this.login_url.innerHTML='\n                您好！请 &nbsp;<a href="login.html">登录 </a>\n                <span>&nbsp;/&nbsp;</span><a href="register.html">注册</a>\n                ';var h=this;(0,_tools.ajax)({url:this.url+"carousel.php",dataType:"json"}).then(function(t){var o="",l="",s=!0,e=!1,n=void 0;try{for(var i,a=t[Symbol.iterator]();!(s=(i=a.next()).done);s=!0){o+='<img src="'+i.value.url+'" alt="">',l+="<span></span>"}}catch(t){e=!0,n=t}finally{try{!s&&a.return&&a.return()}finally{if(e)throw n}}h.carousel_banner.innerHTML+=o,h.list_div.innerHTML=l;var r=(0,_tools.$)("img","all",h.carousel_banner);r[0].className="show";var u=(0,_tools.$)("span","all",h.list_div);u[0].className="active",h.bannerSwitch(r,u)}),this.autoplay()}},{key:"bannerSwitch",value:function(o,l){for(var s=0,t=function(t){l[t].onmouseover=function(){(0,_tools.removeAll)(l,"active"),(0,_tools.removeAll)(o,"show"),(0,_tools.addClass)(this,"active"),(0,_tools.addClass)(o[t],"show"),s=t}},e=0;e<l.length;e++)t(e);this.rightbtn.onclick=function(){5<=s&&(s=-1),s++,(0,_tools.removeAll)(l,"active"),(0,_tools.removeAll)(o,"show"),(0,_tools.addClass)(l[s],"active"),(0,_tools.addClass)(o[s],"show")},this.leftbtn.onclick=function(){s<=0&&(s=6),s--,(0,_tools.removeAll)(l,"active"),(0,_tools.removeAll)(o,"show"),(0,_tools.addClass)(l[s],"active"),(0,_tools.addClass)(o[s],"show")},this.leftbtn.onmouseover=function(){this.style.backgroundPosition="-240px -72px"},this.leftbtn.onmouseout=function(){this.style.backgroundPosition="0 -72px"},this.rightbtn.onmouseover=function(){this.style.backgroundPosition="-158px -72px"},this.rightbtn.onmouseout=function(){this.style.backgroundPosition="-78px -72px"}}},{key:"autoplay",value:function(){var o=this;this.timer=setInterval(function(){o.rightbtn.onclick()},3e3),this.carousel.onmouseover=function(t){clearInterval(o.timer)},this.carousel.onmouseout=function(){o.timer=setInterval(function(){o.rightbtn.onclick()},1e3)}}}]),t}(),Panels=function(){function t(){_classCallCheck(this,t),this.url="http://10.31.161.144/huawei/php/",this.lis=(0,_tools.$)(".carousel_list>ul>li","all"),this.panels=(0,_tools.$)(".carousel_list>ul>li .li_panels","all")}return _createClass(t,[{key:"init",value:function(){var v=this;(0,_tools.ajax)({url:this.url+"c_panels.php",dataType:"json"}).then(function(t){for(var o=0;o<v.panels.length;o++){var l="",s=!0,e=!1,n=void 0;try{for(var i,a=t[Symbol.iterator]();!(s=(i=a.next()).done);s=!0){var r=i.value;if(parseInt(r.type)==o){l+="<ul>";for(var u=r.urls.split(","),h=r.title.split(","),c=0;c<u.length;c++)l+=' <li>\n                                        <a href="">\n                                            <img src="'+u[c]+'" alt="">\n                                            <span>'+h[c]+"</span>\n                                        </a>\n                                    </li>";l+="</ul>"}}}catch(t){e=!0,n=t}finally{try{!s&&a.return&&a.return()}finally{if(e)throw n}}""!==l&&(l+=' <ul class="sub_list">\n                        <li><a href="">查看全部</a></li>\n                    </ul>'),v.panels[o].innerHTML=l,v.bewidth(v.panels[o])}}),this.navshow()}},{key:"bewidth",value:function(t){2==t.children.length&&(t.style.width="200px"),5==t.children.length&&(t.style.width="1020px"),0==t.children.length&&(t.style.display="none")}},{key:"navshow",value:function(){for(var o=this,l=this,t=function(t){o.lis[t].onmouseover=function(){(0,_tools.removeAll)(l.lis,"active"),(0,_tools.removeAll)(l.panels,"show"),(0,_tools.addClass)(l.lis[t],"active"),(0,_tools.addClass)(l.panels[t],"show")},o.lis[t].onmouseout=function(){(0,_tools.removeAll)(l.lis,"active"),(0,_tools.removeAll)(l.panels,"show")}},s=0;s<this.lis.length;s++)t(s)}}]),t}();exports.Carousel=Carousel,exports.Panels=Panels;