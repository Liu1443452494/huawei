"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Login=void 0;var _createClass=function(){function s(o,t){for(var e=0;e<t.length;e++){var s=t[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(o,s.key,s)}}return function(o,t,e){return t&&s(o.prototype,t),e&&s(o,e),o}}(),_tools=require("./tools.js");function _classCallCheck(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}var Login=function(){function o(){_classCallCheck(this,o),this.inputs=(0,_tools.$)("form input","all"),this.btn=(0,_tools.$)("form .button"),this.p=(0,_tools.$)("form .first"),this.tips=(0,_tools.$)("form .tips")}return _createClass(o,[{key:"init",value:function(){var o=this;this.isCookie(),this.verify(),this.inputs[0].oninput=function(){o.p.style.display="none"}}},{key:"isCookie",value:function(){_tools.jstool.getcookie("username")&&_tools.jstool.getcookie("password")&&(this.inputs[0].value=_tools.jstool.getcookie("username"),this.inputs[1].value=_tools.jstool.getcookie("password"),this.inputs[2].checked="checked")}},{key:"verify",value:function(){var t=this;this.btn.onclick=function(){if(""==t.inputs[0].value)t.p.style.display="block",t.tips.innerHTML="请输入你的账号";else{/^(\w){8,}$/.test(t.inputs[0].value)?""==t.inputs[1].value?(t.p.style.display="block",t.tips.innerHTML="请输入你的密码"):(0,_tools.ajax)({url:"http://10.31.161.144/huawei/php/login.php",data:{username:t.inputs[0].value,password:t.inputs[1].value},type:"post"}).then(function(o){o?(t.inputs[2].checked?(_tools.jstool.addcookie("username",t.inputs[0].value,10),_tools.jstool.addcookie("password",t.inputs[1].value,10)):(_tools.jstool.delcookie("username"),_tools.jstool.delcookie("password")),alert("登录成功"),_tools.jstool.addcookie("username1",t.inputs[0].value,1),_tools.jstool.addcookie("login",!0,1),location.href="index.html"):(t.p.style.display="block",t.tips.innerHTML="账号或密码错误")}):(t.p.style.display="block",t.tips.innerHTML="华为帐号限制在4~80 个字符")}}}}]),o}();exports.Login=Login;