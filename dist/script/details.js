"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Addcart=exports.Cartrender=exports.Mglass=void 0;var _createClass=function(){function e(t,s){for(var i=0;i<s.length;i++){var e=s[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),_tools=require("./tools.js");function _classCallCheck(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}var Mglass=function(){function t(){_classCallCheck(this,t),this.scale=(0,_tools.$)(".p_left .scale"),this.spic=(0,_tools.$)(".scale .spic"),this.sf=(0,_tools.$)(".spic .sf"),this.bf=(0,_tools.$)(".scale .bf"),this.bpic=(0,_tools.$)(".scale .bpic"),this.product=(0,_tools.$)(".product ")}return _createClass(t,[{key:"init",value:function(){var t=this;this.spic.onmouseover=function(){t.over()},this.spic.onmouseout=function(){t.out()}}},{key:"over",value:function(){var s=this;this.sf.style.visibility="visible",this.bf.style.visibility="visible",this.sf.style.width=this.spic.offsetWidth*this.bf.offsetWidth/this.bpic.offsetWidth+"px",this.sf.style.height=this.spic.offsetHeight*this.bf.offsetHeight/this.bpic.offsetHeight+"px",this.bili=this.bf.offsetWidth/this.sf.offsetWidth,this.spic.onmousemove=function(t){t=t||event;s.move(t)}}},{key:"out",value:function(){this.sf.style.visibility="hidden",this.bf.style.visibility="hidden"}},{key:"move",value:function(t){var s=t.clientX-this.scale.offsetLeft-this.product.offsetLeft-this.sf.offsetWidth/2,i=t.clientY-this.scale.offsetTop-this.product.offsetTop-this.sf.offsetHeight/2;s<=0?s=0:s>=this.spic.offsetWidth-this.sf.offsetWidth-2&&(s=this.spic.offsetWidth-this.sf.offsetWidth-2),i<=0?i=0:i>=this.spic.offsetHeight-this.sf.offsetHeight-2&&(i=this.spic.offsetHeight-this.sf.offsetHeight-2),this.sf.style.left=s+"px",this.sf.style.top=i+"px",this.bpic.style.left=-s*this.bili+"px",this.bpic.style.top=-i*this.bili+"px"}}]),t}(),Cartrender=function(){function t(){_classCallCheck(this,t),this.sid=location.search.substr(location.search.length-1,1),this.url="http://10.31.161.144/huawei/php/",this.h1=(0,_tools.$)(".contnet_meta h1"),this.span=(0,_tools.$)(".m_span span"),this.price=(0,_tools.$)(".info_price span","all"),this.ul=(0,_tools.$)(".left_list ul"),this.obj=new Mglass,this.btn_left=(0,_tools.$)(".left_nav .btn_left"),this.btn_right=(0,_tools.$)(".left_nav .btn_right")}return _createClass(t,[{key:"init",value:function(){this.getdata()}},{key:"getdata",value:function(){var f=this,a=this;(0,_tools.ajax)({url:this.url+"details.php",data:{sid:this.sid},dataType:"json"}).then(function(t){var s=t.urls.split(",");a.obj.spic.firstElementChild.src=s[0],a.obj.bpic.src=s[0],a.h1.innerHTML=t.bdesc,a.span.innerHTML=t.btips,a.price[1].innerHTML="￥"+t.price+".00";var i="",e=!0,o=!1,l=void 0;try{for(var r,n=s[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){i+='\n                <li>\n                <a href="javascript:;">\n                    <img src="'+r.value+'" alt="">\n                </a>\n            </li>\n                '}}catch(t){o=!0,l=t}finally{try{!e&&n.return&&n.return()}finally{if(o)throw l}}a.ul.innerHTML=i;var h=(0,_tools.$)("li","all",f.ul);h[0].firstElementChild.style.border=" 1px solid #ca141d",a.imgswitch(h),f.leftbtn(h),f.rightbtn(h)})}},{key:"imgswitch",value:function(s){console.log(s);for(var i=this,t=0;t<s.length;t++)s[t].onmouseover=function(){for(var t=0;t<s.length;t++)s[t].firstElementChild.style.border=0;i.obj.spic.firstElementChild.src=this.children[0].firstElementChild.src,i.obj.bpic.src=this.children[0].firstElementChild.src,this.firstElementChild.style.border=" 1px solid #ca141d"}}},{key:"leftbtn",value:function(i){var e=this;this.btn_left.onclick=function(){var t=e.ul.offsetLeft,s=i[0].offsetWidth;0<=t&&(s=0,_tools.bufferMove)(e.ul,{left:0}),(0,_tools.bufferMove)(e.ul,{left:t+s})}}},{key:"rightbtn",value:function(i){var e=this;this.btn_right.onclick=function(){var t=e.ul.offsetLeft,s=i[0].offsetWidth;t<=-s*(i.length-5)&&(s=0,_tools.bufferMove)(e.ul,{left:-s*(i.length-5)}),(0,_tools.bufferMove)(e.ul,{left:t-s})}}}]),t}(),Addcart=function(){function t(){_classCallCheck(this,t),this.sidarr=[],this.numarr=[],this.sid=location.search.substr(location.search.length-1,1),this.input=(0,_tools.$)(".stock input"),this.btn=(0,_tools.$)(".buttonmain .btn-01")}return _createClass(t,[{key:"init",value:function(){var t=this;this.btn.onclick=function(){t.addcart(),confirm("购物车加入成功，是否进入购物车查看")&&(location.href="cart.html")}}},{key:"addcart",value:function(){if(_tools.jstool.getcookie("numarr")&&_tools.jstool.getcookie("sidarr")&&(this.sidarr=_tools.jstool.getcookie("sidarr").split(","),this.numarr=_tools.jstool.getcookie("numarr").split(",")),-1!=this.sidarr.indexOf(this.sid)){var t=this.numarr[this.sidarr.indexOf(this.sid)],s=parseInt(t)+parseInt(this.input.value);this.numarr[this.sidarr.indexOf(this.sid)]=s,_tools.jstool.addcookie("numarr",this.numarr,30)}else this.sidarr.push(this.sid),this.numarr.push(this.input.value),_tools.jstool.addcookie("sidarr",this.sidarr,30),_tools.jstool.addcookie("numarr",this.numarr,30)}}]),t}();exports.Mglass=Mglass,exports.Cartrender=Cartrender,exports.Addcart=Addcart;